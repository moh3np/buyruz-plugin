# یادداشت‌های تغییرات Buyruz Settings
هشدار: پیش از هر تغییر، حتماً فایل CONTRIBUTING.md را با دقت کامل بخوانید و بی‌قید و شرط اجرا کنید و پس از اتمام کار تطابق را دوباره چک کنید.

تمام نسخه‌ها باید در این فایل ثبت شوند. هنگام انتشار نسخهٔ جدید:
- عنوان نسخه را با فرمت `## [x.y.z] - YYYY-MM-DD` اضافه کنید.
- تغییرات را به زبان فارسی و کاملاً کاربرمحور توضیح دهید.
- در صورت نیاز به اقدام اضافه (مثل پاک‌سازی کش یا تنظیمات)، آن را در بند جداگانه ذکر کنید.

## [2.3.73] - 2025-12-31
- تایید نهایی عملکرد تنظیمات استایل FAQ و هماهنگی کامل با کدهای جدید.

## [2.3.72] - 2025-12-31
- بهبود جزئی در استایل‌دهی و اطمینان از اعمال صحیح تغییرات نسخه قبل.

## [2.3.71] - 2025-12-31
- رفع مشکل عدم اعمال استایل روی خروجی شورت‌کد Rank Math با بهبود سلکتورهای CSS و JS.
- حذف کامل تنظیمات قدیمی و بلااستفاده از پنل مدیریت برای جلوگیری از سردرگمی.

## [2.3.70] - 2025-12-31
- بازطراحی کامل استایل سوالات متداول (FAQ) با ظاهر مدرن، کارتی و سایه‌دار.
- بهینه‌سازی برای موبایل و حذف تنظیمات قدیمی «نسخه موبایل فشرده» (طراحی جدید ذاتاً ریسپانسیو است).
- بازنویسی کامل اسکریپت آکاردئون با جاوااسکریپت خالص (Vanilla JS) برای سرعت بیشتر و حذف وابستگی‌ها.
- پشتیبانی کامل از رنگ برند در استایل جدید.
- رعایت اصول دسترسی‌پذیری (Accessibility) و سئو در ساختار جدید.

## [2.3.69] - 2025-12-31
- به‌روزرسانی نسخه جهت هماهنگی با تغییرات نهایی اسکریپت گوگل شیت (ارسال شناسه خالص FAQ).

## [2.3.68] - 2025-12-31
- اصلاح نهایی ارسال شناسه سوالات متداول (FAQ) به API: ارسال فقط شناسه (مانند `s-49297-1767182469989`) در فیلد shortcode متادیتای رنک‌مث، به جای ارسال کل رشته شورت‌کد.

## [2.3.67] - 2025-12-31
- تغییر مجدد الگوی شناسه سوالات متداول (FAQ) به `s-{ProductID}-{Timestamp}` برای تضمین یکتایی کامل و جلوگیری از تداخل در سیستم رنک‌مث.

## [2.3.66] - 2025-12-31
- نمایش نام برند به جای شناسه برند در دیالوگ ثبت سریع محصول (با خواندن از رینج BrandId و BrandName).
- اصلاح الگوی تولید شناسه سوالات متداول (FAQ) به `faq-{ProductID}` برای استانداردسازی و جلوگیری از تداخل.

## [2.3.65] - 2025-12-31
- تغییر منطق تولید شناسه سوالات متداول (FAQ) در اسکریپت گوگل شیت: استفاده از شناسه محصول (ProductIDinSite) برای جلوگیری از تکراری شدن و حفظ یکپارچگی.
- جایگزینی خودکار عبارت RMFAQCODE در متن توضیحات با شناسه تولید شده برای سوالات متداول.

## [2.3.64] - 2025-12-31
- وسط‌چین کردن محتوای جدول مقایسه برای نمایش بهتر.
- غیرفعال کردن نمایش خودکار جدول در انتهای توضیحات محصول (نمایش فقط با شورت‌کد).
- بهبود نمایش ریسپانسیو جدول در موبایل (حالت کارتی و راست‌چین).

## [2.3.63] - 2025-12-30
- بهبود سئو/دسترس‌پذیری جدول مقایسه: افزودن caption داخل جدول، برچسب aria-label و scope برای هدرها تا کرالرها و فناوری‌های کمکی بتوانند ساختار جدول را دقیق تشخیص دهند.

## [2.3.54] - 2025-12-30
- به‌روزرسانی نسخه پس از آخرین اصلاحات جدول مقایسه.

## [2.3.53] - 2025-12-30
- به‌روزرسانی نسخه پس از اصلاح منطق ذخیره جدول (حفظ کامل سطرها و ستون‌ها).

## [2.3.52] - 2025-12-30
- ذخیره ردیف/سلول بدون حذف یا بازنویسی: جدول دقیقا با مقادیر واردشده ذخیره می‌شود و حتی اگر برخی ستون‌ها خالی باشند، سطرها حذف نمی‌شوند؛ تغییرات کاربر/ API در دیتابیس می‌ماند.

## [2.3.51] - 2025-12-30
- ردیف‌ها پس از ذخیره دیگر به‌دلیل خالی‌شدن ستون‌ها حذف یا بازنویسی نمی‌شوند؛ مقادیر سطرها همان‌طور که وارد شده‌اند باقی می‌مانند (مثلاً سطر دوم با مقدار «سطر ۲» ثابت می‌ماند).

## [2.3.50] - 2025-12-30
- راست‌چین شدن کامل ویرایشگر جدول متا در صفحهٔ محصول؛ گرید سطر/ستون و کنترل‌ها در جهت RTL نمایش داده می‌شوند.

## [2.3.49] - 2025-12-30
- رفع نمایش کاراکترهای فارسی: مقادیر ستون/سطر/عنوان در فرانت پیش از رندر از حالت `u0633...` و `\u0633...` به یونیکد واقعی تبدیل می‌شوند تا جدول با حروف درست نمایش داده شود.
- بروزرسانی نسخه.

## [2.3.48] - 2025-12-30
- تنظیمات و جداول ذخیره‌شده حتی پس از غیرفعال‌سازی، حذف و نصب مجدد افزونه در دیتابیس باقی می‌مانند؛ اسکریپت حذف دیگر هیچ گزینه یا متادیتایی را پاک نمی‌کند تا با فعال‌سازی دوباره همه‌چیز برگردد.
- نسخه و مستند نسخه به‌روزرسانی شد.

## [2.3.45] - 2025-12-30
- جدول ویرایش محصول به مدل یکپارچه با شناسه یکتا برای هر جدول و شورت‌کد `[buyruz_compare_table id="..."]` ارتقا یافت؛ کنترل سطرها در سمت چپ و کنترل ستون‌ها روی هدر مطابق طرح دست‌نویس چیده شد و هدر حذف‌نشدنی است.
- در تب تنظیمات «جدول متا» فهرست همه جدول‌های ثبت‌شده اضافه شد؛ می‌توانید از همان‌جا جدول جدید برای محصول بسازید، جدول موجود را حذف یا ویرایش کنید و شورت‌کد/شناسه هر جدول را ببینید.
- استایل و اسکریپت ادمین برای ردیف/ستون‌افزودن بعد از آیتم فعلی بازنویسی شد تا ورودی‌ها همیشه هم‌تراز بمانند و نام فیلدها به‌صورت خودکار پس از هر تغییر به‌روز شوند.

## [2.3.44] - 2025-12-30
- حذف کامل پیش‌فرض‌های ستون/عنوان از تنظیمات: بخش «جدول متا» در تنظیمات پاک شد تا هیچ مقدار یا تعداد ستون پیش‌فرضی اعمال نشود.
- چیدمان هدر/سطرها بازطراحی شد: سطر هدر دقیقاً بالای داده‌ها و بدون ستون اضافی یا فضای طوسی، ورودی‌های کارت‌مانند شبیه «جدول سایزبندی» نمونه‌ها؛ دکمهٔ حذف هر سطر بیرون از شبکه و بدون مزاحمت قرار گرفت.
- استایل فرم ادمین و کنترل‌های افزودن/حذف ستون/سطر به نسخهٔ مشابه تصاویر به‌روز شد (بدون مقدار پیش‌فرض و بدون ستون اجباری فراتر از حداقل یک ستون خالی).
- منطق ذخیره همچنان فقط در صورت وجود داده جدول را نشان می‌دهد؛ در حالت خالی متا ذخیره نمی‌شود و شورت‌کد چیزی رندر نمی‌کند.

## [2.3.43] - 2025-12-30
- بازطراحی کامل UI جدول مقایسه در ویرایش محصول با استایل مشابه «جدول سایزبندی» تصاویر: عنوان اختیاری بالای فرم، خط جداکننده، دکمه‌های سبز/قرمز برای افزودن/حذف سطر و ستون و فیلدهای بدون مقدار پیش‌فرض.
- حذف سوئیچ فعال/غیرفعال؛ منطق نمایش فقط بر اساس وجود داده است و اگر همهٔ مقادیر خالی باشند، جدول (حتی از طریق شورت‌کد) نمایش داده نمی‌شود.
- ساختار داده ساده‌تر شد: سطر اول به‌عنوان هدر ذخیره و رندر می‌شود، سطرهای بعدی بدنهٔ جدول هستند، ستون‌ها/ردیف‌های خالی یا تکراری حذف و متای ذخیره‌شده برای محصولات حتی پس از غیرفعال/حذف افزونه باقی می‌ماند.
- استایل فرانت و متاباکس با کارت سفید، خط جداکنندهٔ عنوان و جدول تمیز به‌روز شد تا به UI جدید نزدیک‌تر باشد و پیش‌فرض‌های تنظیمات ستون/عنوان خالی شدند.

## [2.3.42] - 2025-12-30
- نمایش متاباکس تضمین شد: متاباکس «جدول مقایسه» فقط زمانی مخفی می‌شود که هم تب و هم پنل اصلی واقعاً قابل‌مشاهده باشند؛ اگر تب در DOM باشد اما مخفی باشد، متاباکس باقی می‌ماند تا فرم از دسترس خارج نشود.

## [2.3.41] - 2025-12-30
- بازگردانی متاباکس «جدول مقایسه» وقتی تب ووکامرس در دسترس نباشد: حذف متاباکس فقط زمانی انجام می‌شود که هم تب و هم پنل اصلی وجود داشته باشند تا در حالت نبود تب، فرم fallback همچنان نمایش داده شود.

## [2.3.40] - 2025-12-30
- جلوگیری از تکرار فرم جدول مقایسه: اگر تب اصلی «جدول مقایسه» در ویرایش محصول حاضر باشد، متاباکس fallback به‌طور خودکار پنهان می‌شود تا فرم دوم نمایش داده نشود.
- عنوان متاباکس به «جدول مقایسه محصول» یکسان شد تا برچسب «پشتیبان» بدون دلیل تکرار نشود و کاربر فقط یک نام ببیند.

## [2.3.31] - 2025-12-30
- تب «جدول مقایسه» همیشه قابل دسترس است: اگر ووکامرس تب را در پنل «اطلاعات محصول» نشان ندهد، یک متاباکس پشتیبان همان فرم را در صفحهٔ ویرایش محصول نمایش می‌دهد تا متا از دسترس خارج نشود.
- هشدار غیرفعال‌سازی ویرایشگر جدید محصول فقط وقتی نمایش داده می‌شود که واقعاً ویژگی «ویرایشگر جدید محصول» فعال بوده و توسط افزونه خاموش شده باشد؛ در حالت کلاسیک پیش‌فرض هیچ پیامی نمی‌آید.

## [2.3.32] - 2025-12-30
- نمایش جدول در فرانت تضمین شد: اگر قالب/بلوک‌های ووکامرس فیلتر توضیحات را نخوانند، جدول مقایسه بعد از بخش خلاصهٔ محصول (`woocommerce_after_single_product_summary`) تزریق می‌شود و از نمایش تکراری جلوگیری می‌گردد.

## [2.3.34] - 2025-12-30
- ویرایش جدول در خود صفحهٔ محصول تضمین شد: متاباکس «جدول مقایسه» همیشه با فرم کامل رندر می‌شود (حتی اگر تب ووکامرس دیده نشود) و در ابتدای متاباکس‌ها قرار می‌گیرد.
- ویرایشگر جدید محصول ووکامرس به‌طور قطعی غیرفعال شد تا تب/متاباکس کلاسیک بدون اخلال در همهٔ سایت‌ها حاضر باشد.

## [2.3.35] - 2025-12-30
- رفع به‌هم‌ریختگی متن فارسی در فرم/پیش‌نمایش جدول: داده‌های شامل توالی `\uXXXX` اکنون پیش از رندر به یونیکد واقعی تبدیل می‌شوند تا مقادیر فارسی به‌درستی نمایش داده شوند.

## [2.3.36] - 2025-12-30
- تکمیل دی‌کُد متن فارسی: حتی اگر بک‌اسلش‌ها حذف شده باشند و مقادیر به‌صورت `u0633...` ذخیره شوند، قبل از نمایش در فرم/پیش‌نمایش به یونیکد واقعی برگردانده می‌شوند تا مانند سایر بخش‌های سایت خوانا باشند.

## [2.3.37] - 2025-12-30
- جلوگیری از تکرار ناخواسته ستون‌ها: اگر ورودی ستون‌ها تکرار سه‌تایی مشابه باشد (مثلاً دو بار ستون‌های پایه)، هنگام ذخیره/بازخوانی به اولین مجموعه تقلیل داده می‌شود تا ستون و ردیف اضافی خودکار اضافه نشود.

## [2.3.38] - 2025-12-30
- حذف ذخیره فوری و اسکریپت Ajax؛ جدول متا فقط با دکمه بروزرسانی محصول ذخیره می‌شود تا تضاد فرم تکراری رخ ندهد.
- استایل‌های نشانگر وضعیت ذخیره حذف شد و سادگی رابط حفظ شد.

## [2.3.39] - 2025-12-30
- پیش‌نمایش زنده از تب/متاباکس جدول مقایسه حذف شد تا فرم سبک‌تر و بدون تداخل باشد.
- جلوگیری از تکرار ستون پایه در انتهای لیست: اگر مجموعهٔ ستون‌های پایه به‌صورت ناخواسته دوباره به انتهای لیست افزوده شود، هنگام ذخیره و بازخوانی حذف می‌شود.

## [2.3.33] - 2025-12-30
- مسیر قطعی مدیریت جدول: یک صفحهٔ اختصاصی «جدول مقایسه» با لینک سریع از لیست محصولات افزوده شد تا حتی اگر تب/متاباکس در ویرایش محصول دیده نشود بتوانید جدول را ویرایش کنید.
- لود اسکریپت/استایل ادیتور برای صفحهٔ جدید نیز فعال شد تا همان رابط مدرن (ستون/ردیف با ذخیره فوری) در دسترس باشد.

## [2.3.30] - 2025-12-30
- نمایش جدول متای محصول در ویرایشگر تضمین شد: ویرایشگر جدید محصول ووکامرس به‌صورت خودکار برای این افزونه غیرفعال می‌شود تا تب «جدول مقایسه» و ذخیره متا در حالت کلاسیک همیشه دیده شود، همراه با هشدار مدیر برای اطلاع.

## [2.3.29] - 2025-12-30
- تب «جدول مقایسه» در صفحهٔ محصول ووکامرس بازطراحی شد؛ کارت سربرگ جدید با سوئیچ فعال‌سازی، دکمهٔ «ذخیره فوری» و نشانگر وضعیت، تمام تغییرات ستون/ردیف را لحظه‌ای با Ajax ذخیره و پیش‌نمایش زنده را همزمان به‌روز می‌کند.
- داده‌های جدول پیش از ذخیره پاک‌سازی می‌شوند: ستون‌ها و ردیف‌های خالی حذف می‌شوند، حداقل ۳ و حداکثر ۶ ستون نگه داشته می‌شود و در صورت غیرفعال بودن یا خالی بودن جدول متای قبلی پاک می‌شود تا خروجی خالی باقی نماند.
- جدول فرانت ظاهری کارت‌مانند با هدر چسبان و برچسب‌های data-label برای موبایل دارد و اگر عنوانی ننویسید عبارت «مقایسه با محصولات مشابه» به‌صورت پیش‌فرض نمایش داده می‌شود.

## [2.3.28] - 2025-12-30
- خواندن جدول مقایسه در فرانت مقاوم‌تر شد تا متای ذخیره‌شده از بایروز شیت (چه به‌صورت JSON و چه آرایه) حتی بدون پرچم فعال‌سازی جداگانه، در صورت داشتن ردیف معتبر نمایش داده شود.

## [2.3.27] - 2025-12-30
- تب «جدول مقایسه» جایگزین متاباکس شد و حالا ستون‌های پایه با عناوین «نام محصول مشابه، مخاطب (سن/نفرات)، تمایز کلیدی (چرا این؟)» و ستون‌های اضافی تا ۶ عدد در همان تب و با رابط مدرن قابل ویرایش و حذف هستند.
- ذخیرهٔ لحظه‌ای از طریق AJAX اضافه شد تا هر تغییر ستون یا ردیف فوراً در متای محصول ذخیره شود و وضعیت ذخیره‌سازی در بالای تب نمایش داده شود؛ پیش‌نمایش زنده نیز بدون رفرش به‌روزرسانی می‌شود.
- رندر فرانت جدول به‌روز شد: پشتیبانی از نمایش تا ۶ ستون با برچسب‌های data-label برای موبایل، استایل واکنش‌گرا و جای‌گذاری خودکار در محل توکن [[COMPARE_TABLE]] یا انتهای توضیحات محصول.

## [2.3.25] - 2025-12-30
- تب «جدول متا» به تنظیمات افزوده شد؛ فقط وقتی ماژول در پیشخوان فعال است نمایش داده می‌شود و می‌توان از همان تب ماژول را روشن/خاموش و پیش‌فرض ستون/عنوان جدول را تنظیم کرد.
- ناوبری تب‌ها به وضعیت فعال ماژول‌ها وابسته شد؛ تب دیباگ بدون واژهٔ «ماژول» و متن‌های بازاریابی/متا از هدر و کارت‌های بالا حذف شدند.

## [2.3.26] - 2025-12-30
- ستون‌های جدول متا اکنون قابل افزودن/حذف (حداقل ۳ و حداکثر ۶) هستند و پیش‌نمایش/ردیف‌ها با تغییر ستون‌ها به‌روز می‌شود.
- ستون‌های پیش‌فرض به «نام محصول مشابه»، «مخاطب (سن/نفرات)» و «تمایز کلیدی (چرا این؟)» استاندارد شد و عنوان پیش‌فرض در فرانت از تنظیمات خوانده می‌شود؛ کَش رندر برای جای‌گذاری تکراری حذف شد تا جدول هم در توکن و هم انتهای محتوا دیده نشود.

## [2.3.24] - 2025-12-30
- تب/متاباکس «جدول متا» به ویرایش محصول افزوده شد تا جدول مقایسه بدون نوشتن HTML ساخته و در متای محصول ذخیره شود؛ ردیف‌ها قابل افزودن/حذف و ستون‌های پیش‌فرض قابل نام‌گذاری هستند.
- جدول در فرانت تنها در صفحات محصول و در صورت وجود داده رندر می‌شود؛ اگر [[COMPARE_TABLE]] در توضیحات باشد همان‌جا جایگزین می‌شود و در غیر این صورت به انتهای توضیحات افزوده می‌گردد، همراه با لود CSS جدول فقط هنگام نیاز.

## [2.3.23] - 2025-12-30
- ناوبری تنظیمات از نوار بالایی به ساید ناو منتقل شد و تب «استایل» جدید برای تنظیمات نمایش و استایل جداول اضافه شد.
- ذخیره تنظیمات به‌صورت عادی و با دکمهٔ ذخیره انجام می‌شود (پیام «ذخیره لحظه‌ای» حذف شد) و تیک گزینه‌ها تنها با اقدام کاربر تغییر می‌کند.

## [2.3.22] - 2025-12-30
- بخش «استایل جداول» به تنظیمات عمومی اضافه شد؛ می‌توانید استایل بایروز را به‌صورت انتخابی روی جداول محصولات، برگه‌ها یا دسته‌بندی‌ها فعال کنید.

## [2.3.21] - 2025-12-30
- حذف فایل قدیمی الحاق خودکار FAQ رنک مث تا بستهٔ افزونه سبک‌تر شود و هیچ کد بلااستفاده‌ای در نصب باقی نماند.

## [2.3.17] - 2025-12-29
- بازنویسی کامل سیستم الحاق FAQ Rank Math به توضیحات محصول با رویکرد چندلایه:
  - استفاده از هوک `woocommerce_product_tabs` برای تغییر callback تب توضیحات و تضمین نمایش FAQ
  - افزودن fallback با هوک `woocommerce_product_after_tabs` برای قالب‌های غیراستاندارد
  - روش دوگانه برای استخراج FAQ: ابتدا shortcode رنک‌مث و در صورت عدم موفقیت، رندر مستقیم از Schema DB
  - استخراج بهبودیافته schema ID از فیلد `@id` و `metadata.shortcode` 
  - جلوگیری از تکرار FAQ با سیستم کش و پرچم `$appended_ids`
  - پشتیبانی از قالب‌هایی که از لوپ اصلی وردپرس استفاده نمی‌کنند

## [2.3.12] - 2025-12-29
- رفع مشکل ذخیره‌نشدن سوئیچ‌ها در تمام کارت‌های تنظیمات (از جمله پردازش شورت‌کد و FAQ Rank Math) هنگام ذخیره Ajax؛ مقدار اکنون فوراً در پایگاه‌داده ثبت می‌شود.
- برای اطمینان، پاسخ Ajax وضعیت گزینه‌های ذخیره‌شده را بازمی‌گرداند تا UI بتواند به‌روز بماند.

## [2.3.13] - 2025-12-29
- رفع پردازش نشدن شورت‌کد در برخی قالب‌ها: تشخیص نوع محصول ووکامرس از نوع «simple/variable…» به «product» نرمال شد تا فیلترها روی تب توضیحات/خلاصه اعمال شوند.

## [2.3.14] - 2025-12-29
- تضمین پردازش شورت‌کد حتی در قالب‌هایی که مستقیماً محتوای تب توضیحات/خلاصه را بدون فیلترهای وردپرس رندر می‌کنند: پردازش روی the_excerpt، woocommerce_short_description و the_content و همچنین پیش‌پرداخت مستقیم متغیرهای post_content/post_excerpt انجام می‌شود.

## [2.3.15] - 2025-12-29
- افزودن مسیر قطعی برای الحاق FAQ Rank Math به انتهای توضیحات محصول: علاوه بر the_content، روی فیلتر توضیحات ووکامرس (`woocommerce_product_get_description`) و رویداد wp محتوا را پیش‌پرداخت می‌کند تا حتی در قالب‌هایی که از لوپ اصلی استفاده نمی‌کنند HTML آماده تزریق شود.

## [2.3.16] - 2025-12-29
- استخراج ID اسکیما FAQ مقاوم‌تر شد: ابتدا متاهای ذخیره‌شده بررسی می‌شود و سپس در صورت دسترسی از API داخلی Rank Math (`Schema\DB::get_schemas`) خوانده می‌شود؛ تشخیص IDهای کوتاه‌تر یا با پیشوند `#s-` نیز افزوده شد.

## [2.3.17] - 2025-12-29
- رفع محدودیت اجرای افزوده‌سازی FAQ در قالب‌هایی که خارج از لوپ/کوئری اصلی محتوای محصول را رندر می‌کنند؛ تشخیص صفحه محصول بر اساس post_type و is_product انجام می‌شود و فیلتر the_content در حالت relaxed اجرا می‌شود تا FAQ همیشه در توضیحات افزوده شود.

## [2.3.18] - 2025-12-29
- استخراج اسکیما FAQ از هر دو منبع Rank Math (DB و متا) و تولید HTML مستقیم در صورت نبود/خالی بودن خروجی شورت‌کد؛ تشخیص ID از @id و metadata و کلیدهای متا مستحکم شد.
- مسیرهای نمایش افزوده شد: خروجی FAQ علاوه بر تب توضیحات و after_tabs، در after_single_product_summary نیز به‌عنوان fallback نمایش داده می‌شود و جلوگیری از تکرار با کش درون‌درخواستی انجام می‌شود.

## [2.3.19] - 2025-12-29
- حذف کامل تنظیمات «حالت بارگذاری» و «سلکتور سفارشی» از پنل و منطق؛ تشخیص بارگذاری اکنون همیشه خودکار و ساده است و گزینه‌های مربوطه از فعال‌سازی/پاکسازی و به‌روزرسانی حذف شدند.

## [2.3.20] - 2025-12-29
- حذف ماژول/تب «سوالات متداول محصولات (Rank Math)» و منطق الحاق خودکار FAQ به تب توضیحات محصول؛ ثبت تنظیم و پاک‌سازی مرتبط حذف شد و کلاس‌های مربوطه دیگر لود نمی‌شوند.

## [2.3.11] - 2025-12-29
- رفع مشکل پردازش شورت‌کدها در صفحات محصول حتی با قالب‌هایی که تب توضیحات را خارج از فیلترهای ووکامرس رندر می‌کنند (افزودن پردازش روی the_content با کش درون‌درخواستی).
- اجرای شورت‌کدها همچنان فقط در صورت روشن بودن سوئیچ مربوطه و در فرانت‌اند انجام می‌شود.

## [2.3.10] - 2025-12-29
- هر دو قابلیت جدید قابل کنترل از تنظیمات: پردازش شورت‌کدهای توضیحات/خلاصهٔ محصول و افزودن FAQ Rank Math با سوئیچ مستقل.
- پردازش شورت‌کد فقط در فرانت و روی صفحات محصول فعال می‌شود و از درخواست‌های ادمین/REST دور است.

## [2.3.9] - 2025-12-29
- شورت‌کدها در توضیحات اصلی و خلاصهٔ محصولات ووکامرس پردازش می‌شوند تا محتوای پویا در تب توضیحات نیز نمایش داده شود.

## [2.3.8] - 2025-12-29
- امکان جدید: افزودن خروجی FAQ Rank Math به انتهای تب «توضیحات محصول» ووکامرس با یک سوئیچ جداگانه (به‌صورت پیش‌فرض خاموش).
- پردازش فقط روی صفحات محصول و بدون نوشتن در دیتابیس انجام می‌شود؛ با کش درون‌درخواستی برای جلوگیری از تکرار و افت عملکرد.
- تنظیم مربوطه در کارت ماژول Rank Math در پیشخوان افزونه اضافه شد تا مدیر سایت کنترل فوری داشته باشد.

## [2.3.4] - 2025-11-30
- بازطراحی رابط صفحات تنظیمات با هدر دارای متا، ناوبری چسبان، سایدبار راهنما و کارت‌های واکنش‌گرا که در موبایل هم خواناست.
- ذخیره تنظیمات عمومی و دیباگ بدون رفرش از طریق Ajax سبک به همراه پیام زنده و به‌روزرسانی فوری رنگ برند در صفحه.
- کاهش بار دیتابیس با کش تنظیمات در همان درخواست و لود شرطی منابع فقط روی صفحات بایروز برای سرعت بالاتر.

## [2.3.3] - 2025-11-29
- جابه‌جایی منوی «تنظیمات بایروز» یک پله بالاتر (موقعیت ۲) برای دسترسی سریع‌تر مدیران.

## [2.3.2] - 2025-11-29
- چیدمان صفحهٔ ماژول‌ها بازنویسی شد تا دقیقاً شبیه کارت‌های Rank Math باشد: کارت‌های مربعی با آیکون رنگی، توضیح کوتاه و سوئیچ اسلایدی در پایین.
- سوئیچ‌های ماژول اکنون با Ajax و بدون رفرش صفحه وضعیت را تغییر می‌دهند و پیام لحظه‌ای نمایش می‌دهند.
- هدر و ناوبری تب‌دار جمع‌وجورتر شد تا محتوای اصلی در مرکز توجه باشد.

## [2.3.1] - 2025-11-29
- بازطراحی کامل UI صفحهٔ تنظیمات با الهام از چیدمان کارت‌های Rank Math (شبکهٔ ماژول، سوئیچ اسلایدی و کارت‌های روشن).
- حذف عبارت «Buyruz Dashboard» از بالای صفحه و جایگزینی با هدر مینیمال و ناوبری تب‌دار هماهنگ با سبک رنک مث.
- هماهنگی استایل فرم‌ها و کارت‌های تنظیمات برای خوانایی بهتر و تجربهٔ نزدیک به داشبورد Rank Math.

## [2.3.0] - 2025-11-29
- جابه‌جایی منوی «تنظیمات بایروز» به زیر «پیشخوان» تا جای آن با عادت مدیران وردپرس هماهنگ و دسترسی به تنظیمات سریع‌تر شود.

## [2.2.2] - 2025-11-29
- بازطراحی هدر پیشخوان با کارت گرافیکی مینیمال که فقط نام «تنظیمات بایروز» و نسخهٔ افزونه را نمایش می‌دهد تا صفحه خلوت‌تر باشد.
- حذف کارت‌های چک‌لیست و راهنمای اضافی از صفحهٔ تنظیمات برای جلوگیری از شلوغی و زیاده‌گویی.
- به‌روزرسانی استایل‌ها برای هماهنگی با طراحی جدید و تمرکز روی نمایش نسخه در بالای صفحه.

## [2.2.1] - 2025-11-29
- انتقال منوی «تنظیمات بایروز» به بالاترین جایگاه سایدبار ادمین برای دسترسی سریع‌تر مدیران سایت.
- هماهنگ‌سازی نام افزونه در هدر با برند فارسی بدون پسوند انگلیسی.

## [2.2.0] - 2025-11-29
- ری‌برند به Buyruz Settings: تغییر نام فایل اصلی به `buyruz-settings.php`، متن دامنه به `buyruz-settings`، و هماهنگ‌سازی پیشوندها به BRZ.
- افزایش پیش‌نیاز وردپرس به 6.8.3 و تأکید بر سازگاری PHP 8.1+.
- الزام جملهٔ هشدار CONTRIBUTING در همهٔ فایل‌ها و پاکسازی نام‌گذاری‌ها برای هویت جدید.

## [2.1.5] - 2025-11-29
- ری‌برند کامل به پیشوند/ثابت‌های BRZ و پاکسازی نام‌گذاری‌ها بر اساس معماری جدید؛ تمامی کلاس‌ها، گزینه‌ها و دستگیره‌ها هم‌راستا شدند.
- افزودن جملهٔ الزام‌آور مطالعهٔ CONTRIBUTING در همهٔ فایل‌ها مطابق دستورالعمل سختگیرانهٔ انتشار.
- به‌روزرسانی CSS/JS و بارگذار برای نام‌های جدید و حفظ کارایی/امنیت.
- تغییر نام گزینهٔ ذخیره‌سازی تنظیمات به `brz_options` و هم‌راستا شدن دسته‌بندی‌های تنظیمات و هوک‌ها با نام‌گذاری BRZ.

## [2.1.0] - 2025-11-29
- افزودن نگهبان (Guard) برای الزام PHP 8.1+ و جلوگیری از بارگذاری در محیط‌های ناسازگار.
- ادامهٔ بهینه‌سازی ساختار ماژولار با autoload و بوت مرکزی برای توسعهٔ آینده بدون افت عملکرد.
- تأکید بر به‌روزرسانی دستی و حذف کامل منطق‌های غیر استاندارد مرتبط با آخرین بروزرسانی.

## [2.0.0] - 2025-11-29
- بازطراحی ساختار افزونه با بارگذار کلاس (autoload) و لایه‌بندی ماژولار برای توسعه‌های آینده بدون تغییر در عملکرد فعلی.
- حذف کامل منطق‌های غیر استاندارد آخرین بروزرسانی و هرگونه اتصال به گیت‌هاب؛ تنها به‌روزرسانی دستی از این پس پشتیبانی می‌شود.
- سامان‌دهی پوشه‌ها و نام‌گذاری فایل‌ها (core/admin/front/integration/support) برای نگه‌داری و توسعهٔ ساده‌تر در نسخه‌های بعدی.

## [1.3.11] - 2025-10-24
- اضافه‌شدن کارت «دیباگ و لاگ‌ها» در تنظیمات برای فعال‌سازی لاگ‌گیری بخش‌های مختلف (شروع با فرآیند به‌روزرسانی افزونه).
- ثبت لاگ کامل از تمامی درخواست‌ها، پاسخ‌ها، تصمیمات کش و خطاهای سیستم بروزرسانی در فایل‌های روزانه (`logs/brz-update-*.log`).
- امکان ماسک خودکار توکن‌ها و داده‌های حساس، انتخاب مدت نگهداری (۱ تا ۳۰ روز) و مشاهدهٔ مسیر فایل‌ها از داخل پیشخوان.
- پاکسازی خودکار لاگ‌های قدیمی و اضافه‌شدن هوک‌های دیباگ در خط سیر کامل بروزرسانی برای سهولت عیب‌یابی.

## [1.3.10] - 2025-10-24
- همگام‌سازی مستندات با الزام جدید: هر تغییر باید بلافاصله همراه با نسخهٔ تازه به GitHub پوش شود تا اختلاف نسخه/کد رخ ندهد.
- افزایش نسخهٔ افزونه به 1.3.10 برای هماهنگی با تغییرات مستندات و جلوگیری از تکرار خطای نسخه.

## [1.3.9] - 2025-10-24
- بازنویسی سیستم به‌روزرسانی GitHub با پشتیبانی از ریپوی عمومی بدون توکن، تنظیم اختیاری شاخه و تطبیق خودکار با ریلیزها یا فایل نسخهٔ شاخهٔ انتخابی.
- اعمال هدرهای امنیتی/Authorization روی تمام دامنه‌های دانلود گیت‌هاب، همراه با Allowlist خودکار هنگام فعال بودن `WP_HTTP_BLOCK_EXTERNAL`.
- نمایش پیام‌های خطای شفاف با کد وضعیت، تشخیص محدودیت نرخ و پاک‌سازی کش هنگام `force-check` یا اجرای WP-CLI.
- جلوگیری از ساخت پوشهٔ تکراری پس از نصب آپدیت به کمک تغییر نام منبع استخراج‌شده به پوشهٔ فعلی افزونه.

## [1.3.8] - 2025-10-24
- رفع خطای کشنده هنگام «بررسی دوباره» که به خاطر پاسخ نامعتبر در سیستم به‌روزرسانی وردپرس رخ می‌داد؛ اکنون اتصال نامعتبر گیت‌هاب بدون توقف داشبورد مدیریت نادیده گرفته می‌شود.
- افزایش تاب‌آوری سیستم به‌روزرسانی در برابر داده‌های غیرمنتظره و تهی تا فرآیند بررسی نسخه همیشه کامل شود.

## [1.3.7] - 2025-10-23
- اجرای منطق آکاردئون تنها روی درخواست‌های فرانت‌اند؛ بررسی‌های مدیریتی و کران‌ها دیگر درگیر فیلترهای Rank Math نمی‌شوند.
- تقویت سازگاری با اسکیماهای غیرمعمول به‌گونه‌ای که ساختارهای شیء یا داده‌های ناقص بدون هشدار کنار گذاشته شوند.

## [1.3.5] - 2025-10-23
- جلوگیری از اجرای فیلتر آکاردئون FAQ در نواحی ادمین و درخواست‌های غیرصفحه‌ای برای پرهیز از بروز خطا هنگام بررسی به‌روزرسانی‌ها.
- افزایش پایداری هنگام پردازش اسکیماهایی که ساختار غیرمنتظره دارند.

## [1.3.4] - 2025-10-23
- رفع هشدارهای Rank Math هنگام پردازش اسکیماهایی که کلید `@type` ندارند؛ اکنون فیلتر آکاردئون تنها روی اسکیماهای معتبر اعمال می‌شود.

## [1.3.3] - 2025-10-23
- بازطراحی کامل صفحهٔ تنظیمات با رابط کارت‌محور، هماهنگ با زبان فارسی و آماده برای افزودن ماژول‌های آینده.
- افزودن راهنمای توسعه داخل پنل برای تاکید بر UX مدرن، پاکسازی دیتابیس و استفاده از بهترین الگوهای مهندسی.
- استایل اختصاصی برای صفحهٔ ادمین و یادآوری اصول عملکردی در `CONTRIBUTING.md`.

## [1.3.2] - 2025-10-23
- رفع مشکل عدم نمایش فوری به‌روزرسانی: کش نسخهٔ جدید اکنون حین «بررسی مجدد» پاک می‌شود و هر بار اتصال تازه به گیت‌هاب برقرار می‌گردد.
- کاهش زمان کش نتیجهٔ گیت‌هاب به ۱۰ دقیقه و پاک‌سازی خودکار پس از نصب نسخهٔ جدید.

## [1.3.1] - 2025-10-23
- نمایش تعداد روز باقی‌مانده برای اعتبار توکن گیت‌هاب در صفحهٔ تنظیمات (به‌جای تاریخ و ساعت دقیق).

## [1.3.0] - 2025-10-23
- پشتیبانی از اسکیما و شورت‌کد FAQ افزونه Rank Math: تبدیل خودکار محتوا به آکاردئون با استایل بایروز.
- تشخیص خودکار FAQ در نوشته‌ها و محصولات حتی زمانی که فقط از سازندهٔ اسکیما استفاده شده باشد.

## [1.2.2] - 2025-10-23
- بازنویسی توضیح افزونه در فهرست وردپرس برای معرفی پنل تنظیمات بایروز و حذف لینک اضافه.
- افزودن دکمهٔ «تنظیمات» در لیست افزونه‌ها برای دسترسی مستقیم به صفحهٔ مدیریت.
- نمایش خلاصهٔ تغییرات نسخهٔ جدید هنگام انتشار به عنوان اعلان به‌روزرسانی در وردپرس.

## [1.2.1] - 2025-10-23
- نمایش توکن ذخیره‌شدهٔ گیت‌هاب در صفحهٔ تنظیمات برای جلوگیری از خالی بودن فیلد پس از ذخیره و امکان ویرایش سریع‌تر.

## [1.2.0] - 2025-10-23
- تغییر نام افزونه به «تنظیمات بایروز» و افزودن لینک مستقیم به Codruz.ir در فهرست افزونه‌ها.
- جابه‌جایی صفحهٔ تنظیمات به منوی اصلی پیشخوان برای دسترسی سریع‌تر پیش از افزونهٔ دراگونایزر.
- به‌روزرسانی اسناد برای مسیرهای جدید و آماده‌سازی نسخهٔ تازه جهت انتشار.

## [1.1.0] - 2025-10-23
- افزودن سیستم بررسی و پیشنهاد به‌روزرسانی از مخزن خصوصی گیت‌هاب بدون نیاز به افزونهٔ جانبی.
- امکان ثبت، جایگزینی یا حذف توکن دسترسی گیت‌هاب از صفحهٔ تنظیمات افزونه همراه با نمایش تاریخ انقضای توکن (در صورت ارائهٔ GitHub).

## [1.0.1] - 2025-10-23
- به‌روزرسانی اطلاعات افزونه با نام «کُدروز» و لینک خانهٔ افزونه.
- افزایش نسخه به ۱٫۰٫۱ تا وردپرس امکان جایگزینی نسخه را نمایش دهد.

## [1.0.0] - 2025-10-23
- انتشار اولیهٔ افزونه با آکاردئون اختصاصی برای FAQهای Rank Math و بارگذاری شرطی فایل‌ها.
